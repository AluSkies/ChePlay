<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ChePlay - Recomendaciones Inteligentes</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  
  <!-- date-fns -->
  <script src="https://cdn.jsdelivr.net/npm/date-fns@3.0.0/index.min.js"></script>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/custom.css" />
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-gradient-to-r from-purple-600 to-purple-800 
                 text-white shadow-lg">
    <div class="container mx-auto px-4 py-6">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold">🎵 ChePlay</h1>
          <p class="text-white/80 text-sm mt-1">
            Sistema de recomendaciones con algoritmos inteligentes
          </p>
        </div>
        <div class="text-right">
          <span id="userDisplay" class="text-sm text-white/80">
            Usuario: <span id="currentUser" 
                           class="font-semibold text-white">
                      Cargando...
                    </span>
          </span>
        </div>
      </div>
    </div>
  </header>

  <!-- Tab Navigation -->
  <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 
              z-50">
    <div class="container mx-auto px-4">
      <div class="flex space-x-1 overflow-x-auto">
        <button data-tab="music" 
                class="tab-button px-6 py-4 font-medium text-gray-600 
                       hover:text-purple-600 whitespace-nowrap 
                       transition-colors active">
          🎵 Música
        </button>
        <button data-tab="movies" 
                class="tab-button px-6 py-4 font-medium text-gray-600 
                       hover:text-purple-600 whitespace-nowrap 
                       transition-colors">
          🎬 Películas
        </button>
        <button data-tab="analytics" 
                class="tab-button px-6 py-4 font-medium text-gray-600 
                       hover:text-purple-600 whitespace-nowrap 
                       transition-colors">
          📊 Analytics
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    
    <!-- ==================== MUSIC TAB ==================== -->
    <div id="music-tab" class="tab-content active">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        
        <!-- Friend Recommendations Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4 
                     flex items-center gap-2">
            <span>👥</span>
            Recomendación de Amigos
          </h2>
          
          <div class="space-y-4">
            <!-- Controls -->
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Usuario
                </label>
                <select id="friendUser" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option>Cargando...</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Cantidad (K)
                </label>
                <input type="number" id="friendK" value="5" min="1" 
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
            </div>
            
            <button id="friendGo" 
                    class="w-full bg-gradient-to-r from-purple-600 
                           to-purple-800 text-white py-2 px-4 rounded-lg 
                           font-medium hover:opacity-90 transition-opacity 
                           shadow-md">
              Obtener Recomendaciones
            </button>
          </div>

          <!-- Results -->
          <div id="friendResults" class="mt-6 space-y-4 hidden">
            <div>
              <h3 class="text-sm font-semibold text-gray-700 mb-2">
                Conexiones Directas
              </h3>
              <div id="friendDirect" class="space-y-2"></div>
            </div>
            
            <div>
              <h3 class="text-sm font-semibold text-gray-700 mb-2">
                Por Camino Más Corto
              </h3>
              <div id="friendShortest" class="space-y-2"></div>
            </div>
            
            <div>
              <h3 class="text-sm font-semibold text-gray-700 mb-2">
                Amigo Más Cercano
              </h3>
              <div id="friendClosest" class="space-y-2"></div>
            </div>
          </div>
        </div>

        <!-- Friend Network Visualization -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4">
            Red de Conexiones
          </h2>
          <div id="friendNetworkChartContainer" 
               class="chart-container"></div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <!-- Song Recommendations Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4 
                     flex items-center gap-2">
            <span>🎵</span>
            Recomendación de Canciones (Prim)
          </h2>
          
          <div class="space-y-4">
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Usuario
                </label>
                <select id="songUser" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option>Cargando...</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Cantidad (K)
                </label>
                <input type="number" id="songK" value="10" min="1" 
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
            </div>
            
            <button id="songGo" 
                    class="w-full bg-gradient-to-r from-purple-600 
                           to-purple-800 text-white py-2 px-4 rounded-lg 
                           font-medium hover:opacity-90 transition-opacity 
                           shadow-md">
              Recomendar Canciones
            </button>
          </div>

          <div id="songResults" class="mt-6 space-y-2"></div>
        </div>

        <!-- Playlist Generator Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4 
                     flex items-center gap-2">
            <span>📝</span>
            Generador de Playlist
          </h2>
          
          <div class="space-y-4">
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Usuario
                </label>
                <select id="playlistUser" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option>Cargando...</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Tamaño
                </label>
                <input type="number" id="playlistSize" value="5" min="1" 
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Duración mín (seg)
                </label>
                <input type="number" id="playlistMinDuration" min="0" 
                       placeholder="Opcional"
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Duración máx (seg)
                </label>
                <input type="number" id="playlistMaxDuration" min="0" 
                       placeholder="Opcional"
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
            </div>
            
            <div class="flex items-center gap-2">
              <input type="checkbox" id="playlistUnique" checked 
                     class="w-4 h-4 text-purple-600 border-gray-300 
                            rounded focus:ring-purple-500" />
              <label for="playlistUnique" 
                     class="text-sm font-medium text-gray-700">
                Artistas únicos
              </label>
            </div>
            
            <button id="playlistGenerate" 
                    class="w-full bg-gradient-to-r from-purple-600 
                           to-purple-800 text-white py-2 px-4 rounded-lg 
                           font-medium hover:opacity-90 transition-opacity 
                           shadow-md">
              Generar Playlist
            </button>
          </div>

          <div id="playlistSummary" class="mt-4"></div>
          <div id="playlistResults" class="mt-2 space-y-2"></div>
        </div>
      </div>

      <!-- Trending Section -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-xl font-bold text-gray-800 
                     flex items-center gap-2">
            <span>🔥</span>
            Trending Global
          </h2>
          <button id="trendingRefresh" 
                  class="px-4 py-2 bg-gray-100 hover:bg-gray-200 
                         text-gray-700 rounded-lg font-medium 
                         transition-colors">
            ↻ Actualizar
          </button>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div id="trendingResults" class="space-y-2"></div>
          <div id="trendingChartContainer" class="chart-container"></div>
        </div>
      </div>
    </div>

    <!-- ==================== MOVIES TAB ==================== -->
    <div id="movies-tab" class="tab-content">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        
        <!-- Movie Recommendations Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4 
                     flex items-center gap-2">
            <span>🎬</span>
            Recomendaciones de Películas
          </h2>
          
          <div class="space-y-4">
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Usuario
                </label>
                <select id="movieUser" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option>Cargando...</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Cantidad (K)
                </label>
                <input type="number" id="movieK" value="10" min="1" 
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">
                Algoritmo
              </label>
              <select id="movieAlgorithm" 
                      class="w-full px-3 py-2 border border-gray-300 
                             rounded-lg focus:ring-2 focus:ring-purple-500 
                             focus:border-transparent">
                <option value="bfs">BFS (Amplitud)</option>
                <option value="dfs">DFS (Profundidad)</option>
                <option value="diverse">Kruskal (Diverso)</option>
                <option value="sorted">MergeSort</option>
              </select>
            </div>
            
            <button id="movieGo" 
                    class="w-full bg-gradient-to-r from-purple-600 
                           to-purple-800 text-white py-2 px-4 rounded-lg 
                           font-medium hover:opacity-90 transition-opacity 
                           shadow-md">
              Recomendar Películas
            </button>
          </div>

          <div id="movieResults" class="mt-6 space-y-2"></div>
        </div>

        <!-- Genre Distribution Chart -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4">
            Distribución por Género
          </h2>
          <div id="genreDistributionChartContainer" 
               class="chart-container"></div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <!-- Marathon Planner Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4 
                     flex items-center gap-2">
            <span>⏱️</span>
            Planificador de Maratón
          </h2>
          
          <div class="space-y-4">
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Usuario
                </label>
                <select id="marathonUser" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option>Cargando...</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Duración (min)
                </label>
                <input type="number" id="marathonTime" value="360" min="1" 
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Rating mínimo
                </label>
                <input type="number" id="marathonRating" value="3.5" 
                       step="0.5" min="0" max="5"
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Algoritmo
                </label>
                <select id="marathonAlgorithm" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option value="dp">Dynamic Programming</option>
                  <option value="branchandbound">Branch & Bound</option>
                </select>
              </div>
            </div>
            
            <button id="marathonGo" 
                    class="w-full bg-gradient-to-r from-purple-600 
                           to-purple-800 text-white py-2 px-4 rounded-lg 
                           font-medium hover:opacity-90 transition-opacity 
                           shadow-md">
              Planificar Maratón
            </button>
          </div>

          <div id="marathonSummary" class="mt-4"></div>
          <div id="marathonResults" class="mt-2 space-y-2"></div>
        </div>

        <!-- Marathon Duration Chart -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4">
            Duración del Maratón
          </h2>
          <div id="marathonDurationChartContainer" 
               class="chart-container"></div>
        </div>
      </div>

      <!-- Movie Trending Section -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4 
                   flex items-center gap-2">
          <span>🔥</span>
          Películas en Tendencia
        </h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Tipo
            </label>
            <select id="movieTrendingType" 
                    class="w-full px-3 py-2 border border-gray-300 
                           rounded-lg focus:ring-2 focus:ring-purple-500 
                           focus:border-transparent">
              <option value="global">Global (Greedy)</option>
              <option value="by-genre">Por Género (MergeSort)</option>
              <option value="influential">Influyentes (BFS)</option>
            </select>
          </div>
          <div id="genreInputContainer" class="hidden">
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Género
            </label>
            <input type="text" id="movieTrendingGenre" 
                   placeholder="Sci-Fi, Action, Drama..."
                   class="w-full px-3 py-2 border border-gray-300 
                          rounded-lg focus:ring-2 focus:ring-purple-500 
                          focus:border-transparent" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Cantidad (K)
            </label>
            <input type="number" id="movieTrendingK" value="10" min="1" 
                   class="w-full px-3 py-2 border border-gray-300 
                          rounded-lg focus:ring-2 focus:ring-purple-500 
                          focus:border-transparent" />
          </div>
        </div>
        
        <button id="movieTrendingGo" 
                class="w-full lg:w-auto px-6 py-2 bg-gradient-to-r 
                       from-purple-600 to-purple-800 text-white rounded-lg 
                       font-medium hover:opacity-90 transition-opacity 
                       shadow-md">
          Ver Trending
        </button>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
          <div id="movieTrendingResults" class="space-y-2"></div>
          <div id="movieTrendingChartContainer" 
               class="chart-container"></div>
        </div>
      </div>
    </div>

    <!-- ==================== ANALYTICS TAB ==================== -->
    <div id="analytics-tab" class="tab-content">
      <div class="grid grid-cols-1 gap-6">
        
        <!-- Algorithm Comparison Section -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-xl font-bold text-gray-800 mb-4 
                     flex items-center gap-2">
            <span>📊</span>
            Comparación de Algoritmos
          </h2>
          
          <div class="space-y-4 mb-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-3">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Usuario
                </label>
                <select id="analyticsUser" 
                        class="w-full px-3 py-2 border border-gray-300 
                               rounded-lg focus:ring-2 focus:ring-purple-500 
                               focus:border-transparent">
                  <option>Cargando...</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                  Cantidad (K)
                </label>
                <input type="number" id="analyticsK" value="10" min="1" 
                       class="w-full px-3 py-2 border border-gray-300 
                              rounded-lg focus:ring-2 focus:ring-purple-500 
                              focus:border-transparent" />
              </div>
              <div class="flex items-end">
                <button id="analyticsCompare" 
                        class="w-full bg-gradient-to-r from-purple-600 
                               to-purple-800 text-white py-2 px-4 rounded-lg 
                               font-medium hover:opacity-90 transition-opacity 
                               shadow-md">
                  Comparar Algoritmos
                </button>
              </div>
            </div>
          </div>

          <div id="algorithmComparisonChartContainer" 
               class="chart-container-large"></div>
        </div>

        <!-- Statistics Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-gray-600">
                Total de Usuarios
              </h3>
              <span class="text-2xl">👥</span>
            </div>
            <p id="statsUsers" 
               class="text-3xl font-bold text-gray-900">
              -
            </p>
          </div>
          
          <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-gray-600">
                Películas Procesadas
              </h3>
              <span class="text-2xl">🎬</span>
            </div>
            <p id="statsMovies" 
               class="text-3xl font-bold text-gray-900">
              -
            </p>
          </div>
          
          <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-gray-600">
                Canciones Analizadas
              </h3>
              <span class="text-2xl">🎵</span>
            </div>
            <p id="statsSongs" 
               class="text-3xl font-bold text-gray-900">
              -
            </p>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 mt-12">
    <div class="container mx-auto px-4 py-6">
      <div class="text-center text-sm text-gray-600">
        <p>
          ChePlay - Sistema de recomendaciones con algoritmos avanzados
        </p>
        <p class="mt-1">
          BFS • DFS • Dijkstra • Prim • Kruskal • Dynamic Programming • 
          Branch & Bound
        </p>
      </div>
    </div>
  </footer>

  <!-- JavaScript Modules -->
  <script type="module" src="/js/app.js"></script>
</body>
</html>
